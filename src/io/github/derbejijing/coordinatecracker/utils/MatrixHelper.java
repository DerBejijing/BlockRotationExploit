package io.github.derbejijing.coordinatecracker.utils;

import io.github.derbejijing.coordinatecracker.data.EnumRotation;
import io.github.derbejijing.coordinatecracker.math.Matrix2;
import io.github.derbejijing.coordinatecracker.math.Matrix3;
import io.github.derbejijing.coordinatecracker.math.Vector2;

public class MatrixHelper {
	public static Matrix3 rotateMatrix(Matrix3 matrixIn, EnumRotation degrees) {
		Matrix3 m = new Matrix3(matrixIn);
		
		int rotations = 0;
		
		if(degrees.value % 90 == 0) {
			rotations = degrees.value / 90;
			//System.out.println(rotations);
		}
		else return m;
		
		Matrix3 matrixOut = new Matrix3(m.getSize(), m.getCenter());
		
		for(int i = 0; i < rotations; i++) {
			
			for(int y = 0; y < matrixIn.getSizeY(); y++) {
				matrixOut.setLayer(y, rotateMatrix(m.getLayer(y)));
				
				//System.out.println(y + " ----------------------------------");
				
				//System.out.println(matrixIn.getLayer(y).getString());
				
				//System.out.println(matrixOut.getLayer(y).getString());
				
				//System.out.println("----------------------------------");
				
			}
			m.setMatrixArray(matrixOut.getMatrixArray());
			
		}
		
		return matrixOut;
	}
	
	public static Matrix2 rotateMatrix(Matrix2 matrixIn) {
		final int M = matrixIn.getSizeX();
		final int N = matrixIn.getSizeZ();
		int[][] ret = new int[N][M];
		for (int r = 0; r < M; r++) {
			for (int c = 0; c < N; c++) {
				ret[c][M - 1 - r] = matrixIn.getValue(new Vector2(r, c));
			}
		}
		
		return new Matrix2(ret, matrixIn.getCenter());
	}
	
}
