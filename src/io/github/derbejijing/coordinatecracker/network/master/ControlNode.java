package io.github.derbejijing.coordinatecracker.network.master;

import java.util.ArrayList;

/**
 * 
 * The code seen below is UNTESTET
 * and was just uploaded because I work on this from multiple places on multiple devices and need a place to store my "progress"
 * 
 */
public class ControlNode extends Thread {

	private static ControlNode INSTANCE;
	private ArrayList<SlaveConnection> slaveConnections;
	private boolean running;
	private int port;
	
	private ClientSupply clientSupply;
	
	
	public ControlNode(int port) {
		INSTANCE = this;
		slaveConnections = new ArrayList<>();
		this.port = port;
	}
	
	
	public void run() {
		this.running = true;
		this.clientSupply = new ClientSupply(this.port, INSTANCE);
		clientSupply.start();
		
		//while(this.running) {}
		
	}
	
	
	public void supplyNewClient(SlaveConnection connection) {
		this.slaveConnections.add(connection);
		
		System.out.println("New Client joined: " + connection.getHost());
	}
	
	
	public void killThread() {
		this.running = false;
	}
	
	
	public boolean running() {
		return this.running;
	}
	
	
	public static ControlNode getInstance() {
		return INSTANCE;
	}
	
}
