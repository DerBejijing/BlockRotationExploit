# BlockRotationExploit
I found a way to exploit the rotation minecraft applies to certain Blocks to reconstruct coordinates from them

## Rules  
You are allowed to read and modify the source code of the program.  
You can make you own versions based on my discovery.

AS LONG AS...  
... you name me as the one to discover the technique  
... you name me as the programmer of this program  


## About this project
When minecraft renders its blocks, certain blocks like grass, sand, gravel, concrete-powder and many more get a random rotation assigned. Or so it appears to be. In fact, this rotation is not random so that when looking at a grass block (0, 0, 0) in two different worlds they will have the same absolute rotation.  
As I found out this can be exploited to narrow down where an image has been taken in a minecraft world (Coordinate Exploit) which plays a huge role on anarchy servers like 2b2t. This exploit is un efficient and requires a lot of practice to master it. Also the coordinates it generated are only within a certain range around the actual position an image was taken at. Although I am still happy that I found my very own first coordinate exploit.  


## Setup
You can download the source and compile it with the provided information below, or download a full release. But keep in mind that the releases may not include the latest features, as they will most likely also include many bugs.
To build the program, run  
`./build.sh` on linux/macOS  
`build.bat` on windows  
Before running on mac/linux, you may need to `chmod +x` it first.  
When executing it will compile everything to the jar file you can then run like normal. But because batch is such an obscure "language", I dod not manage to prevent the script from copying everything twice to the final jar file. If you can fix it, I would be happy If you submitted a pull request.  
If you find errors, please open an issue, so I can fix it.  


## How to use
To use this program, you can either run it "normally" by double-clicking or execute it from a terminal window to get additional debug output. It was build for java 11 but might as well work for lower or higher java versions.  
In the following I will explain it with the use of grass blocks, but as mentioned it works with other blocks as well.  
In the GUI you can reconstruct the relative rotations you see in an image.  

![GitHub Logo](https://github.com/DerBejijing/media/blob/main/BlockRotationExploit/demo_world.png)

For example you pick the block the crosshair is pointing at and transfer it into the programs GUI. Therefore you click one tile in the gray area and click the "set textured" button. Now you do that for adjacent blocks and, if neccessary, rotate them relatively using the "Rotate" Button. If a block is on a different y-axis, you can increase the layer-spinner. If you are not sure about one block, do not try to guess it. Errors will sum up.  
In the end it might look like this (for the upper image):

![GitHub Logo](https://github.com/DerBejijing/media/blob/main/BlockRotationExploit/demo_program_1.png)

Next take a look at the options:  
You select how many threads you would like to use. The more, the better but do not use more than you CPU offers.  
Enter a file name the program will use to save positive matches. if it does not end with .txt, it will do it automatically. If you don't specify a name, it will create a file of the format: `coordinates_`+`yyyy-MM-dd:HH-mm-ss`  
Set the minecraft version. At this point, only 1.12.2 and 1.16.5 are supported.  
The minimum y-value  
The maximum y-value  
The maximum radius  

Start cracking. You can abort at any time by clicking the button again, but try to avoid that as killing the threads that run the cracker is implemented REALLY badly and cruel.  
Can you find out where the image was taken?  

## Contact
You can message me on discord (DerBejijing#2542) or use the github issue System..  

## Thanks  
I would like to thank
  - [MisterSilverEagle](https://github.com/MisterSilvereagle) for helping me research the minecraft source code  
  - [Hexeption](https://github.com/Hexeption) for providing an amazing tool to decompile and deobfuscate the minecraft source code  
  - the Minecraft mcp team for their tools to decompile minecraft  

## Pro tips
Here are some tips to make the Program more efficient:  
If you see an ocean, consider that when setting y-min and y-max. Minecraft oceans are normally at y=62 so keep that in mind.  
If you see clouds or the sun you can find out the direction the player is looking towards. Use the "Lock rotation" option to use that information. (This makes it up to **four** times more accurate!  
If there are multiple blocks with the same relative rotation adjacent to each other, that will help the program a lot. Because of the algorithm behind it these occurrences are more rare and will help you narrow the results down more efficiently.  
The lines on the water texture are always pointing towards east or west.  
Sunflowers are always facing east.  


## Bugs, coming features and fixes
At this point, the program is still in a beta version.If you find a bug, crash or want to rant over my bad coding style, please feel free submit an issue or a pull request.  
